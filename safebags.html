<div class="block" id="safebagBlock">
  <div class="row g-2 align-items-end">
    <div class="col-md-3">
      <label class="form-label">GrÃ¶ÃŸe</label>
      <input type="number" class="form-control safebagSize" value="48">
    </div>
    <div class="col-md-3">
      <label class="form-label">Jahr</label>
      <input type="number" class="form-control jahr" value="2026">
    </div>
    <div class="col-md-3">
      <label class="form-label">Wochenanzahl</label>
      <input type="number" class="form-control kwCount" value="1">
    </div>
  </div>
</div>

<button class="btn btn-primary mt-3" onclick="generateSafebagPDF()">ðŸ“„ PDF erzeugen</button>

<script>
function generateSafebagPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit:'pt', format:'a4' });
  const pageWidth = doc.internal.pageSize.width;
  const pageHeight = doc.internal.pageSize.height;

  // Eindeutiger Safebag-Block
  const block = document.getElementById('safebagBlock');
  const size = block.querySelector('.safebagSize').value || 48;
  const year = block.querySelector('.jahr').value || new Date().getFullYear();
  const weeks = parseInt(block.querySelector('.kwCount').value) || 1;

  doc.setFont("Helvetica", "normal");
  doc.setFontSize(20);

  for(let kw=1; kw<=weeks; kw++){
    if(kw > 1) doc.addPage();

    const line1 = `Entsorgte Safebags in grosse ${size}`;
    const line2 = `${year} KW ${kw} auch in ${size} grosse`;

    const line1Width = doc.getTextWidth(line1);
    const line2Width = doc.getTextWidth(line2);

    doc.text(line1, (pageWidth - line1Width)/2, pageHeight/2 - 20);
    doc.text(line2, (pageWidth - line2Width)/2, pageHeight/2 + 20);
  }

  doc.save('Safebags.pdf');
}
</script>
